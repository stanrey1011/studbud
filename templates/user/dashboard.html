{% extends "base.html" %}
{% block content %}
<div class="card">
  <div class="card-body">
    <h2 class="card-title">User Dashboard</h2>
    {% if tests %}
      <div class="row">
        {% for test in tests %}
          <div class="col-md-6 mb-4">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">{{ test.name }}</h5>
                <p class="card-text">{{ test.description or 'No description available' }}</p>
                {% if test.questions|length > 0 %}
                  <a href="{{ url_for('user.quiz', test_id=test.id, mode='study') }}" class="btn btn-primary mb-2">Start Study Mode</a>
                  <form action="{{ url_for('user.quiz', test_id=test.id, mode='sim') }}" method="POST" class="d-flex align-items-center flex-column gap-2">
                    {{ sim_form.hidden_tag() }}
                    <div class="input-group">
                      <span class="input-group-text">Timer (min):</span>
                      {{ sim_form.custom_time(class="form-control", id="custom_time_{{ test.id }}", min="0") }}
                    </div>
                    <div class="input-group">
                      <span class="input-group-text">Questions (1 to {{ test.questions|length }}):</span>
                      <input type="number" name="num_questions" id="num_questions_{{ test.id }}" class="form-control" min="1" max="{{ test.questions|length }}" value="{{ test.questions|length }}">
                    </div>
                    {{ sim_form.submit(class="btn btn-success mt-2") }}
                  </form>
                {% else %}
                  <p class="text-muted">No questions available for this test.</p>
                {% endif %}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p>No tests available.</p>
    {% endif %}
  </div>
</div>
{% endblock %}